(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();const B=`<div id="lenght0">
    <i class="fa-regular fa-folder-open"></i>
    <h2>El historial está vacío</h2>
</div>`;let u="",p=null,g=null;class S{constructor(){this.historial=[],this.historialEmpty=B}setHistorialBox(){u=document.querySelector("#historial")}renderHistorial(){if(this.historial.length===0)u.innerHTML=this.historialEmpty;else{for(;u.firstChild;)u.removeChild(u.firstChild);this.historial.forEach(t=>{const i=document.createElement("div");i.innerHTML=`
                <h3>${t.operation}</h3>
                <h4>${t.result}</h4>
                <button class='add'><i id='add' class="fa-solid fa-plus"></i></button>
                <p class='separator'>|</p>
                <button class='remove'><i class="fa-regular fa-trash-can"></i></button>
                `,i.className="historial-element",i.id=t.id,u.appendChild(i),p=document.querySelectorAll(".add"),g=document.querySelectorAll(".remove"),i.addEventListener("click",r=>{this.addRemoveEvent(r,t.id,t.result)})})}}addRemoveEvent(t,i,r){t.target.closest(".add, .remove").className==="add"?U(r):(this.historial=this.historial.filter(o=>o.id!==i),localStorage.setItem("historial",JSON.stringify(this.historial)),this.renderHistorial())}loadHistorial(){localStorage.getItem("historial")&&(this.historial=JSON.parse(localStorage.getItem("historial"))),this.renderHistorial()}saveHistorial(t){const i=JSON.parse(localStorage.getItem("historial"));this.historial=[t,...i],localStorage.setItem("historial",JSON.stringify(this.historial)),this.renderHistorial()}activeButtons(t){p&&(typeof t=="number"||t==="="?(p.forEach(i=>i.disabled=!0),g.forEach(i=>i.disabled=!1)):[...g,...p].forEach(i=>i.disabled=!1))}}const H=()=>{const e=document.querySelectorAll("button"),t=new R;e.forEach(i=>{i.addEventListener("click",r=>{r.target.id!=="show-historial"?O(V(r)):t.main(r.target.innerText)})})};let m;const A=new Uint8Array(16);function I(){if(!m&&(m=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!m))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m(A)}const n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function L(e,t=0){return n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]}const T=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),w={randomUUID:T};function q(e,t,i){if(w.randomUUID&&!t&&!e)return w.randomUUID();e=e||{};const r=e.random||(e.rng||I)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){i=i||0;for(let s=0;s<16;++s)t[i+s]=r[s];return t}return L(r)}let l="",x="";const b=new S;let d=[],h="";const O=e=>{const t=document.getElementById("point"),i=document.getElementById("total"),r=document.getElementById("clear"),s=document.getElementById("show-historial");switch(e){case"C":E(),c(".number",!1),i.disabled=!0,f(0);break;case"=":if(d.length!==0&&l.length!==0){d.push(l*1);const a=new C(d).main();f(a),b.saveHistorial({operation:h,result:a,id:q()}),E(),r.disabled=!1}break;case".":l.length!==0&&(l+=e,y(e),t.disabled=!0,c(".operation",!0));break;default:typeof e=="number"?(x=e,l+=e.toString(),y(x),c(".operation",!1),d.length!==0&&(i.disabled=!1)):l.length!==0&&(c(".operation",!0),c(".number",!1),y(e),d.push(l*1),d.push(e),l="",r.disabled=!1)}b.activeButtons(e),s.disabled=!1},U=e=>{y(e),l=e,b.activeButtons(e),c(".operation",!1),c(".number",!0),d.length!==0?total.disabled=!1:total.disabled=!0},y=e=>(h+=e,f(h),h),E=()=>{h="",d=[],c("button",!0)};class D{constructor(){this.buttons=document.getElementById("numbers"),this.operations=[{id:"point",show:"."},{id:"clear",show:"C"},{id:"multiply",show:"X"},{id:"divide",show:"/"},{id:"rest",show:"-"},{id:"sum",show:"+"}]}buildButtons(t,i,r){const s=document.createElement("button");s.id=t,s.className=i,s.innerText=r,this.buttons.appendChild(s)}generateButtons(){for(let t=0;t<=9;t++)this.buildButtons(`number-${t}`,"number",t);this.operations.forEach(t=>{this.buildButtons(t.id,"operation",t.show)})}}const N=["point","clear","multiply","divide","rest","sum","total"],V=e=>N.includes(e.target.id)?e.target.innerText:e.target.innerText*1;class C{constructor(t){this.array=t,this.newArray=[]}multipliAndDivide(t){const i=[...this.array];let[r,s]=i.splice(t,2).map(a=>a),[o]=this.newArray.splice(this.newArray.length-1,1);this.newArray.push(this.calculate(o,r,s))}returnValues(){const t=[...this.newArray];console.log((t.length-1)/2);for(let i=1;i<=(t.length-1)/2;i++){const[r,s,o]=this.newArray.splice(0,3).map(v=>v),a=this.calculate(r,s,o);this.newArray.splice(0,0,a),console.log(this.newArray)}return this.newArray[0]}calculate(t,i,r){return i==="X"?t*r:i==="/"?t/r:i==="+"?t+r:i==="-"?t-r:"Error"}main(){if(this.array.length===3)return this.calculate(this.array[0],this.array[1],this.array[2]);this.newArray.push(this.array[0]);for(let t=1;t<=this.array.length-1;t+=2)this.array[t]==="X"||this.array[t]==="/"?this.multipliAndDivide(t):(this.newArray.push(this.array[t]),this.newArray.push(this.array[t+1]));return this.returnValues()}}const f=e=>{const t=document.querySelector("#display");t.innerText=e};class R{constructor(){this.calculatorBox=document.querySelector("#calculator-box"),this.historialDesign=document.querySelector("#historial_design"),this.hisorial=document.querySelector("#historial"),this.button=document.querySelector("#show-historial")}main(t){let[i,r,s,o,a]=t==="<"?[">","none",0,"0","0"]:["<","block",.3,"230px","10px"];this.button.innerText=i,this.hisorial.style.display=r,this.calculatorBox.style.boxShadow=`rgba(0, 0, 0, ${s}) 0px 0px 20px`,this.historialDesign.style.width=o,this.historialDesign.style.padding=a}}const c=(e,t)=>{document.querySelectorAll(e).forEach(r=>{r.disabled=t})},J=`<main id="main">
    <article id="article">
        <header id="header-article">
            <i class="fa-solid fa-calculator"></i>
            <h1 class="tittle">Calculadora</h1>
        </header>
        <main id="calculator-box">
            <section id="calculator_design">
                <div id="calculator-display">
                    <p id="display">0</p>
                    <button id="total" class="number">=</button>
                </div>
                <div id="numbers">
                </div>
            </section>
            <section id="historial_design">
                <div id="historial">
                    
                </div>
            </section>
        </main>
        <button id="show-historial">></button>
    </article>
    </main>`;class M{constructor(){this.document=document.querySelector("#app")}buildHtml(){this.document.innerHTML=J;const t=document.getElementById("total");new D().generateButtons(),c(".operation",!0),t.disabled=!0}buttonListener(){H()}main(){this.buildHtml(),this.buttonListener();const t=new S;t.setHistorialBox(),t.loadHistorial()}}new M().main();
